# AGENTS.md

このドキュメントは、AIエージェントが **GitHub Language Stats Extension** リポジトリで作業するためのガイドラインです。

## 1. プロジェクト概要

このプロジェクトは、ReactとTypeScriptで構築されたChrome拡張機能です。主な目的は、GitHubリポジトリの言語統計を表示することです。拡張機能はWebpackを使用してバンドルされています。

## 2. 開発環境のセットアップ

このプロジェクトでは、パッケージマネージャーとして `yarn` を使用します。

1. **Node.jsのインストール**: Node.js v18.12.1 または互換性のあるバージョンがインストールされていることを確認してください。
2. **依存関係のインストール**: 以下のコマンドを実行して、必要なすべての依存関係をインストールします。

    ```bash
    yarn install
    ```

## 3. 開発モードでのアプリケーション実行

拡張機能をビルドし、ファイルの変更を監視するには、次のコマンドを実行します。

```bash
yarn dev
```

これにより、`dist/` ディレクトリにアンパックされた拡張機能が生成されます。

### Chromeで拡張機能を読み込む

1. Chromeを開き、`chrome://extensions` にアクセスします。
2. 右上の「デベロッパーモード」を有効にします。
3. 「パッケージ化されていない拡張機能を読み込む」をクリックします。
4. このプロジェクトの `dist` ディレクトリを選択します。

## 4. 本番環境向けのビルド

本番環境用の拡張機能ビルドを作成するには、次のコマンドを実行します。

```bash
yarn build
```

これも同様に、出力は `dist/` ディレクトリに配置されます。

## 5. テストとリンターの実行

このプロジェクトでは、テストにJestを、リンティングとフォーマットにESLint/Prettierを使用しています。

### テストの実行

テストスイート全体を実行するには：

```bash
yarn test
```

### リンターの実行

リンティングとフォーマットのエラーをチェックするには：

```bash
yarn lint
```

## 6. コーディング規約

- 既存のコーディングスタイルに従ってください。
- すべての新しいコンポーネントには、対応する `.spec.tsx` テストファイルが必要です。
- 変更を送信する前に、`yarn lint` と `yarn test` が正常に成功することを確認してください。

## 7. 重要事項

- **`dist/` ディレクトリ内のファイルを直接編集しないでください。** このディレクトリはビルドプロセスによって生成されます。すべての変更は `src/` ディレクトリ内のファイルに対して行う必要があります。
- 拡張機能のマニフェストは `public/manifest.json` にあります。
- メインのポップアップUIは `public/popup.html` で定義され、`src/popup.tsx` によってレンダリングされます。

## 8. Chrome拡張機能としての特記事項

このプロジェクトは一般的なWebアプリケーションとは異なり、Chrome拡張機能としての特有の構造を持っています。

- **マニフェストバージョン3 (MV3)**: この拡張機能はManifest V3仕様に準拠しています。
- **主要な設定ファイル**: `public/manifest.json` が、拡張機能の権限（permissions）、動作（action）、アイコンなどを定義する中心的なファイルです。変更を加える際は、このファイルの理解が不可欠です。
- **UIはポップアップ**: この拡張機能のユーザーインターフェースは、ツールバーアイコンをクリックした際に表示されるポップアップ (`popup.html`) 内に実装されています。
- **バックグラウンド/コンテントスクリプトの不在**: `manifest.json` には `background` や `content_scripts` の定義がありません。これは、拡張機能のロジックが主にポップアップ内で完結しており、ウェブページに直接スクリプトを注入したり、バックグラウンドで永続的に動作したりはしないことを意味します。
- **外部APIとの通信**: `host_permissions` に `https://github-readme-stats.vercel.app/*` が指定されている通り、この拡張機能は外部のAPIと通信して統計情報を取得します。
